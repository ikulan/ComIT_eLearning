@using Microsoft.AspNetCore.Identity
@using ComIT_eLearning.Models
@inject UserManager<ApplicationUser> UserManager

@{
  var currentUser = await UserManager.GetUserAsync(User);
}


<div class="main-header">
  <nav class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom">
    <ul class="navbar-nav topbar-nav ms-md-auto align-items-center">

      <!-- Notifications  -->
      <li class="nav-item topbar-icon dropdown hidden-caret">
        <a class="nav-link dropdown-toggle" href="#" id="notifDropdown" role="button" data-bs-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-bell"></i>
          <span class="notification">4</span>
        </a>
        <ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
          <li>
            <div class="dropdown-title">
              You have 4 new notification
            </div>
          </li>
          <li>
            <div class="notif-scroll scrollbar-outer">
              <div class="notif-center">
                <a href="#">
                  <div class="notif-icon notif-primary">
                    <i class="fa fa-user-plus"></i>
                  </div>
                  <div class="notif-content">
                    <span class="block"> New user registered </span>
                    <span class="time">5 minutes ago</span>
                  </div>
                </a>
                <a href="#">
                  <div class="notif-icon notif-success">
                    <i class="fa fa-comment"></i>
                  </div>
                  <div class="notif-content">
                    <span class="block">
                      Rahmad commented on Admin
                    </span>
                    <span class="time">12 minutes ago</span>
                  </div>
                </a>
                <a href="#">
                  <div class="notif-img">
                    <!-- <img src="assets/img/profile2.jpg" alt="Img Profile" /> -->
                    <span class="avatar-title rounded-circle border border-white">R</span>
                  </div>
                  <div class="notif-content">
                    <span class="block">
                      Reza send messages to you
                    </span>
                    <span class="time">12 minutes ago</span>
                  </div>
                </a>
                <a href="#">
                  <div class="notif-icon notif-danger">
                    <i class="fa fa-heart"></i>
                  </div>
                  <div class="notif-content">
                    <span class="block"> Farrah liked Admin </span>
                    <span class="time">17 minutes ago</span>
                  </div>
                </a>
              </div>
            </div>
          </li>
          <li>
            <a class="see-all" href="javascript:void(0);">See all notifications<i class="fa fa-angle-right"></i>
            </a>
          </li>
        </ul>
      </li>

      <!-- #region Dropdown  -->
      <li class="nav-item topbar-user dropdown hidden-caret">
        <a class="dropdown-toggle profile-pic" data-bs-toggle="dropdown" href="#" aria-expanded="false">
          <div class="avatar-sm">
            <!-- <img src="assets/img/profile.jpg" alt="..." class="avatar-img rounded-circle" /> -->
            <span class="avatar-title rounded-circle border border-white">@currentUser?.GetAvatar()</span>
          </div>
          <span class="profile-username">
            <span class="op-7">Hi,</span>
            <span class="fw-bold">@currentUser?.GetDisplayName()</span>
          </span>
        </a>
        <ul class="dropdown-menu dropdown-user animated fadeIn">
          <div class="dropdown-user-scroll scrollbar-outer">
            <li>
              <div class="user-box align-items-center">
                <div class="avatar-lg">
                  <!-- <img src="assets/img/profile.jpg" alt="image profile" class="avatar-img rounded" /> -->
                  <span class="avatar-title rounded-circle border border-white">@currentUser?.GetAvatar()</span>
                </div>
                <div class="u-text">
                  <h4>@currentUser?.GetFullName()</h4>
                  @if (User.IsInRole("Admin"))
                  {
                    <span class="badge badge-warning">admin</span>
                  }
                  @if (User.IsInRole("Teacher"))
                  {
                    <span class="badge badge-info">teacher</span>
                  }
                  @if (User.IsInRole("Student"))
                  {
                    <span class="badge badge-success">student</span>
                  }
                </div>
              </div>
            </li>
            <li>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" asp-controller="Account" asp-action="Index">My Profile</a>
              <a class="dropdown-item" href="#">Account Setting</a>
              <div class="dropdown-divider"></div>
              <form id="logoutForm" asp-area="Identity" asp-page="/Account/Logout" method="post" class="d-inline">
                <button type="submit" class="dropdown-item">Logout</button>
              </form>
            </li>
          </div>
        </ul>
      </li>

    </ul>
  </nav>
</div>